<app-header></app-header>
<ion-content [fullscreen]="true" class="login-container">
  <div class="login-form">
    <div class="login-logo">
      <ion-icon name="paw" class="logo"></ion-icon>
      <h1 class="brandName">HappyPet</h1>
    </div>
    <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">
      <ion-item>
        <ion-label position="floating">Nombre</ion-label>
        <ion-input formControlName="nombre"></ion-input>
      </ion-item>
      <ion-item>
        <ion-label position="floating">Apellido</ion-label>
        <ion-input formControlName="apellido"></ion-input>
      </ion-item>
      <ion-item>
        <ion-label position="floating">RUT</ion-label>
        <ion-input formControlName="rut" (ionInput)="onRutInput($event)"></ion-input>
      </ion-item>
      <ion-item>
        <ion-label position="floating">Email</ion-label>
        <ion-input formControlName="email" type="email"></ion-input>
      </ion-item>
      <ion-item>
        <ion-label position="floating">Teléfono</ion-label>
        <ion-input formControlName="telefono"></ion-input>
      </ion-item>
      <ion-item> 
        <ion-label position="floating">Contraseña</ion-label>
        <ion-input [type]="'password'" formControlName="password"></ion-input>
      </ion-item>
      <ion-item>
        <ion-label position="floating">Confirmar Contraseña</ion-label>
        <ion-input [type]="'password'" formControlName="confirmPassword"></ion-input>
      </ion-item>
      <div *ngIf="registerForm.errors?.['mismatch']" class="error-message">
        Las contraseñas no coinciden
      </div>
      <div *ngIf="error" class="error-message">{{ error }}</div>
      <ion-button expand="block" type="submit" [disabled]="loading">
        <ion-spinner *ngIf="loading" name="crescent"></ion-spinner>
        <span *ngIf="!loading">Registrarse</span>
      </ion-button>
      <div class="register-link">
        ¿Ya tienes cuenta?
        <a (click)="navigateToLogin()">Inicia sesión aquí</a>
      </div>
    </form>
    <div *ngIf="success" class="success-message">
      ¡Registro exitoso! Redirigiendo al login...
    </div>
    <div *ngIf="showSuccessOverlay" class="success-overlay">
      <div class="checkmark-container">
        <ion-icon name="checkmark-circle" class="checkmark-anim"></ion-icon>
        <div class="success-text">¡Registro exitoso!</div>
      </div>
    </div>
  </div>
  <app-footer></app-footer>
</ion-content>
